<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            width: 100vw;
            border: 1px solid red;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <button>
        Click me
    </button>

    <script>
        const handleDownload = async () => {
            try {
                // Make a request to the Django backend API endpoint for report generation
                const response = await fetch('http://localhost:8000/get_report/occupancy_trends/');
    
                // Ensure the request was successful (status code 200)
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
    
                // Get the response data as a blob
                const blob = await response.blob();
    
                // Create a Blob from the response data
                const link = document.createElement('a');
                link.href = window.URL.createObjectURL(blob);
                link.download = 'report.pdf';
                document.body.appendChild(link);
    
                // Trigger the click event to start the download
                link.click();
    
                // Set the link's href to an empty string to avoid unwanted file download on the server
                link.href = '';
    
            } catch (error) {
                console.error('Error downloading report:', error);
            }
        };
    
        const button = document.querySelector('button');
        button.onclick = () => handleDownload();
    </script>
    
</body>

</html>